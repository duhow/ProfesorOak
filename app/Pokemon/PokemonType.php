<?php

namespace Pokemon;

class PokemonType {
	const NONE     = 0;
	const NORMAL   = 1;
	const FIGHTING = 2;
	const FLYING   = 3;
	const POISON   = 4;
	const GROUND   = 5;
	const ROCK     = 6;
	const BUG      = 7;
	const GHOST    = 8;
	const STEEL    = 9;
	const FIRE     = 10;
	const WATER    = 11;
	const GRASS    = 12;
	const ELECTRIC = 13;
	const PSYCHIC  = 14;
	const ICE      = 15;
	const DRAGON   = 16;
	const DARK     = 17;
	const FAIRY    = 18;

	public $effective = [
		// First column is NONE = 0
		NORMAL   => [1.0, 1.0,  1.0,   1.0,   1.0,   1.0,   0.714, 1.0,   0.51,  0.714, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0],
		FIGHTING => [1.0, 1.4,  1.0,   0.714, 0.714, 1.0,   1.4,   0.714, 0.51,  1.4, 1.0, 1.0, 1.0, 1.0, 0.714, 1.4, 1.0, 1.4, 0.714],
		FLYING   => [1.0, 1.0,  1.4,   1.0,   1.0,   1.0,   0.714, 1.4,   1.0,   0.714, 1.0, 1.0, 1.4, 0.714, 1.0, 1.0, 1.0, 1.0, 1.0],
		POISON   => [1.0, 1.0,  1.0,   1.0,   0.714, 0.714, 0.714, 1.0,   0.714, 0.51, 1.0, 1.0, 1.4, 1.0, 1.0, 1.0, 1.0, 1.0, 1.4],
		GROUND   => [1.0, 1.0,  1.0,   0.51,  1.4,   1.0,   1.4,   0.714, 1.0,   1.4, 1.4, 1.0, 0.714, 1.4, 1.0, 1.0, 1.0, 1.0, 1.0],
		ROCK     => [1.0, 1.0,  0.714, 1.4,   1.0,   0.714, 1.0,   1.4,   1.0,   0.714, 1.4, 1.0, 1.0, 1.0, 1.0, 1.4, 1.0, 1.0, 1.0],
		BUG      => [1.0, 1.0,  0.714, 0.714, 0.714, 1.0,   1.0,   1.0,   0.714, 0.714, 0.714, 1.0, 1.4, 1.0, 1.4, 1.0, 1.0, 1.4, 0.714],
		GHOST    => [1.0, 0.51, 1.0,   1.0,   1.0,   1.0,   1.0,   1.0,   1.4,   1.0, 1.0, 1.0, 1.0, 1.0, 1.4, 1.0, 1.0, 0.714, 1.0],
		STEEL    => [1.0, 1.0,  1.0,   1.0,   1.0,   1.0,   1.4,   1.0,   1.0,   0.714, 0.714, 0.714, 1.0, 0.714, 1.0, 1.4, 1.0, 1.0, 1.4],
		FIRE     => [1.0, 1.0,  1.0,   1.0,   1.0,   1.0,   0.714, 1.4,   1.0,   1.4, 0.714, 0.714, 1.4, 1.0, 1.0, 1.4, 0.714, 1.0, 1.0],
		WATER    => [1.0, 1.0,  1.0,   1.0,   1.0,   1.4,   1.4,   1.0,   1.0,   1.0, 1.4, 0.714, 0.714, 1.0, 1.0, 1.0, 0.714, 1.0, 1.0],
		GRASS    => [1.0, 1.0,  1.0,   0.714, 0.714, 1.4,   1.4,   0.714, 1.0,   0.714, 0.714, 1.4, 0.714, 1.0, 1.0, 1.0, 0.714, 1.0, 1.0],
		ELECTRIC => [1.0, 1.0,  1.0,   1.4,   1.0,   0.51,  1.0,   1.0,   1.0,   1.0, 1.0, 1.4, 0.714, 0.714, 1.0, 1.0, 0.714, 1.0, 1.0],
		PSYCHIC  => [1.0, 1.0,  1.4,   1.0,   1.4,   1.0,   1.0,   1.0,   1.0,   0.714, 1.0, 1.0, 1.0, 1.0, 0.714, 1.0, 1.0, 0.51, 1.0],
		ICE      => [1.0, 1.0,  1.0,   1.4,   1.0,   1.4,   1.0,   1.0,   1.0,   0.714, 0.714, 0.714, 1.4, 1.0, 1.0, 0.714, 1.4, 1.0, 1.0],
		DRAGON   => [1.0, 1.0,  1.0,   1.0,   1.0,   1.0,   1.0,   1.0,   1.0,   0.714, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.4, 1.0, 0.51],
		DARK     => [1.0, 1.0,  0.714, 1.0,   1.0,   1.0,   1.0,   1.0,   1.4,   1.0, 1.0, 1.0, 1.0, 1.0, 1.4, 1.0, 1.0, 0.714, 0.714],
		FAIRY    => [1.0, 1.0,  1.4,   1.0,   0.714, 1.0,   1.0,   1.0,   1.0,   0.714, 0.714, 1.0, 1.0, 1.0, 1.0, 1.0, 1.4, 1.4, 1.0],
	];

	public function get($name){
		if(is_numeric($name)){ return $name; }
		$name = strtoupper($name);
		$names = [
			"NONE", "NORMAL", "FIGHTING", "FLYING", "POISON", "GROUND",
			"ROCK", "BUG", "GHOST", "STEEL", "FIRE", "WATER", "GRASS",
			"ELECTRIC", "PSYCHIC", "ICE", "DRAGON", "DARK", "FAIRY"
		];
		return array_search($name, $names);
	 }

	 public function against($type, $against = NULL){
		 $type = self::get($type);
		 if(empty($against)){
			 return self::$effective[$type];
		 }
		 $against = self::get($against);
		 return self::$effective[$type][$against];
	 }
}
